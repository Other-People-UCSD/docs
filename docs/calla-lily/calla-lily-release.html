<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-calla-lily/calla-lily-release">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Rebuild Release Notes | Other People Magazine Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://Other-People-UCSD.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://Other-People-UCSD.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://Other-People-UCSD.github.io/docs/calla-lily/calla-lily-release"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Rebuild Release Notes | Other People Magazine Docs"><meta data-rh="true" name="description" content="Date: Apr 21, 2023 - May 18, 2023"><meta data-rh="true" property="og:description" content="Date: Apr 21, 2023 - May 18, 2023"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Other-People-UCSD.github.io/docs/calla-lily/calla-lily-release"><link data-rh="true" rel="alternate" href="https://Other-People-UCSD.github.io/docs/calla-lily/calla-lily-release" hreflang="en"><link data-rh="true" rel="alternate" href="https://Other-People-UCSD.github.io/docs/calla-lily/calla-lily-release" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Other People Magazine Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Other People Magazine Docs Atom Feed"><link rel="stylesheet" href="/assets/css/styles.83610884.css">
<link rel="preload" href="/assets/js/runtime~main.c8f2f42c.js" as="script">
<link rel="preload" href="/assets/js/main.3e78aa7e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Other People</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/introduction">Docs</a><a class="navbar__item navbar__link" href="/docs/category/calla-lily">Calla-Lily</a><a class="navbar__item navbar__link" href="/docs/category/pink-currents">Pink-Currents</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://www.otherpeoplesd.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/Other-People-UCSD/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Docs GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/history">OPM History</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/uploading-media">Uploading Media to the Website</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/editor-manual">Editor/Web Producer Manual</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/calla-lily">Calla-Lily</a><button aria-label="Toggle the collapsible sidebar category &#x27;Calla-Lily&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/calla-lily/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/calla-lily/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/calla-lily/calla-lily-release">Rebuild Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/calla-lily/schema">Post Schema &amp; Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/calla-lily/data-layer">Data Layer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/calla-lily/dynamic-routing">[...slug].js Dynamic Routing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/calla-lily/api">API Endpoints</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/calla-lily/search">Search and Displaying Recommendations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/calla-lily/seo-sitemap-robots">SEO, Sitemap.xml, Robots.txt</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/calla-lily/lighthouse">Lighthouse Workflow (GH Actions)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/pink-currents">Pink-Currents</a><button aria-label="Toggle the collapsible sidebar category &#x27;Pink-Currents&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/projects">Projects</a><button aria-label="Toggle the collapsible sidebar category &#x27;Projects&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/data-science">Data Science Using the Post API</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/recommendation-system">The Recommendation System (v1.0)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/analytics">Web Analytics</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/calla-lily"><span itemprop="name">Calla-Lily</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Rebuild Release Notes</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Rebuild Release Notes</h1></header><p><strong>Date: Apr 21, 2023 - May 18, 2023</strong></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_S0QG"><p>These release notes are public so anyone who is curious to know how we make experimental stories and artistic designs happen behind the scenes knows just how much work is put into making Other People Magazine the most innovative and customizable website! I love what this organization publishes and I hope that this website can be maintained by future undergraduate programmers at UCSD to learn all about web development in media publishing!</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="abstract">Abstract<a href="#abstract" class="hash-link" aria-label="Direct link to Abstract" title="Direct link to Abstract">​</a></h2><p>The Pink-Currents version of the Other People website is built using HTML/CSS/vanilla JS. The static site generating framework is Jekyll in Ruby and deployed on GitHub Pages. Non-developers can publish posts using Forestry.io, a headless CMS.</p><p>Forestry.io was discontinued from service on April 21, 2023, meaning that the Pink-Currents website could no longer support this team of non-developers to publish the stories from our content writers specifically.</p><p>The website needed a new headless CMS to maintain publishability if there was no website developer to publish the posts. However, modern CMSes had higher technical specifications in that connecting to their user-friendly UI for non-developer editing required the site to be built in ReactJS.</p><p>Calla-Lily is the version of the Other People website that is built fully in ReactJS using the most popular React framework for static site generation of its time, NextJS.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="choosing-the-reactjs-static-site-generator">Choosing The Reactjs Static Site Generator<a href="#choosing-the-reactjs-static-site-generator" class="hash-link" aria-label="Direct link to Choosing The Reactjs Static Site Generator" title="Direct link to Choosing The Reactjs Static Site Generator">​</a></h3><p>Working on a plain ReactJS website without a framework would require more configurations and learning to connect the site to a headless CMS, so it was better to rebase the website using a web framework that CMSes had existing guides for. There were two choices that I focused on because of their user support, features, and learning curve: NextJS and Gatsby.</p><p>While Gatsby is a good choice for smaller sites that do not undergo many edits on their pages like Pink-Currents, it was an older framework that did not see much market growth in the past few years. Even though Gatsby was acquired by Netlify recently, I was uncertain about where its future would be several years from now.</p><p>NextJS is a little younger than Gatsby and it has almost double the popularity. NextJS is made for more dynamic sites that see a lot of changes or high traffic.</p><p>As it was the first time I was coding in NextJS, I followed their learning guide and rebuilt the website off of that. For future developers, please run through the ReactJS tutorial then the NextJS tutorial to learn how to code in both of these formats.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="rebuild-process-v400">Rebuild Process (v4.0.0)<a href="#rebuild-process-v400" class="hash-link" aria-label="Direct link to Rebuild Process (v4.0.0)" title="Direct link to Rebuild Process (v4.0.0)">​</a></h2><ul><li>The templated components such as header, footer, and genre pages were converted from their corresponding HTML/Liquid components into JSX elements with SASS modules.</li><li>Favicons were generated from a third party site that checked favicons across more device cases, so there is a wider support.</li><li>The Font Awesome icons used for the social media icons were replaced with Material UI icons so the external dependency was moved into an internal one.</li><li>Posts utilized the dynamic routing feature of NextJS. Dynamic routing allowed for posts to be made and the router templated the content of the post and generated URLs for them on static page generation.<ul><li>Only the first posts from collection 1 and the corresponding media were uploaded to the site for development purposes.</li><li>There was an unresolved issue with putting posts into folders under the post folder where the NextJS would not pass the build stage on GitHub or Vercel’s CLI but worked locally. This could be a path or URI issue.</li><li>It was an issue that many tries to fix could not resolve, so I went ahead and moved onto the CMS to make sure that part of the website worked for our editors.</li></ul></li><li>The dynamic routing posts have slightly different frontmatter:<ul><li>Title<!-- -->*</li><li>Date<!-- -->*</li><li>Contributors<!-- -->*</li><li>Collection No.</li><li>Tags<!-- -->*</li><li>Thumbnail<!-- -->*</li><li>Featured bool is removed because it can be an existence check on the collection</li></ul></li><li>The search program had to be implemented from scratch because the previous search was a Jekyll plugin. After reading through the docs, I understood that the search plugin pulled information from the frontmatter of each post.<ul><li>I set up an API which collected all the frontmatter from the posts and returned it as a JSON object with the slug as the key. Using ReactJS’s stateful properties, the search bar performed live case-insensitive queries for the following information:<ul><li>Title</li><li>Contributors</li><li>Tags</li><li>Date</li></ul></li><li>Now the search program did not rely on an outside dependency and future developers can read our source code to see how the algorithm works!</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="choosing-the-cms">Choosing the CMS<a href="#choosing-the-cms" class="hash-link" aria-label="Direct link to Choosing the CMS" title="Direct link to Choosing the CMS">​</a></h3><p>There were three headless CMS that I was considering: Strapi, Sanity, and TinaCMS. Originally I tried to use TinaCMS on Pink-Currents, but it failed because it lacked the configuration details as explained in the ADR.</p><p>Strapi was the most popular headless CMS on GitHub at the time, but the issue was that Strapi required a database setup. If I went with this option, the website would not be able to be hosted on GitHub. We would have to pay to self-host on a virtual private server and have to configure the entire server as well. It would introduce so much complexity and difficulty to transfer ownership of the website to in the future that it was not a viable option.</p><p>Sanity was the second most popular headless CMS. While Sanity ran fine and had a clean UI for editors to publish posts on, the issue was once again data storage. Sanity does not require a database, but it does store all of the posts and media on their 10 GB free cloud storage. This would be problematic because it would be harder for editors to query for what files were abstracted by the dataset and it prevented the web developer from keeping control over their data.</p><p>TinaCMS was revisited because Forestry.io worked for Pink-Currents, and that meant Calla-Lily should still be able to have the same support and editing quality that Forestry.io provided but in ReactJS instead. Since TinaCMS is a descendant of Forestry.io’s team and version 1.0.0 was released three months ago, it should be a CMS with long-lasting support for several years. A benefit was also that TinaCMS is open-source on the frontend, so developers would be able to maintain it and enhance TinaCMS with more features or plugins to fit developer needs in the future. TinaCMS gave the web developer control over how data is managed, so we still keep access to our posts and media files. In addition, it is customizable enough that we can overcome the challenges we faced using TinaCMS on Pink-Currents.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configurations-for-tinacms-v401---v4042">Configurations for TinaCMS (v4.0.1 - v.4.0.4.2)<a href="#configurations-for-tinacms-v401---v4042" class="hash-link" aria-label="Direct link to Configurations for TinaCMS (v4.0.1 - v.4.0.4.2)" title="Direct link to Configurations for TinaCMS (v4.0.1 - v.4.0.4.2)">​</a></h3><ul><li>Used a working copy of the TinaCMS-ReactJS starter code to figure out how to connect the CMS data to the content of a page in getStaticProps and getStaticPages through the use of the useTina hook</li><li>Even when the codebase is written in React, TinaCMS still parses the markdown content in markdown only and outputting the HTML in MD as plain text. This is the same problem as when TinaCMS was attempted with Pink-Currents.<ul><li>Files were changed from Markdown files to Markdown with JSX (MDX) to support the options passed into TinaMarkdown for HTML. However, this causes linting errors because in JSX every tag such as <code>&lt;img&gt; &lt;br&gt; &lt;hr&gt;</code>, etc. must have an enclosing slash such as <code>&lt;img /&gt;</code>. This strict syntax rule is still supported by regular HTML, so moving these files to another implementation of HTML/CSS/JS would not cause problems in the future.</li><li>Read v4.5.5.1 changes for parsing methodology.</li></ul></li><li>There are some landing pages that should have editing capabilities for the web producer such as the homepage, team page, submissions page, and UC magazine page. Just to make sure that the important parts of the website are complete, the UC magazine page will be fixed at a future stage of the website.<ul><li>The landing page frontmatter was removed because the landing pages are written in javascript only and thus they cannot be accessed by the CMS</li><li>Instead the frontmatter was moved into JSON files because the CMS can access JSON files as well as YAML files. Trying to directly import YAML data into to the JS page failed due to the webpack configuration and I did not want to add another plugin or dependency. Directly importing JSON files worked and allowed me to successfully test that the frontmatter could be moved into another file.</li></ul></li><li>To make the JSON data connected to TinaCMS, it required two things. The first was to build the schema using the keys from the JSON keys so that GraphQL would be able to query the data. Then to add TinaCMS’s live preview visual editor capability I used the CMS’s API query to pull data from the file and then the useTina hook to synchronize changes. This effectively removed the use of a direct import to the data file because the data would instead be pulled through the API.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="permalinks-v410">Permalinks (v4.1.0)<a href="#permalinks-v410" class="hash-link" aria-label="Direct link to Permalinks (v4.1.0)" title="Direct link to Permalinks (v4.1.0)">​</a></h3><p>Pink-Currents uses a global permalink configuration of /\:categories/\:title where categories is the frontmatter field “category” only found on the posts that are part of a collection. Therefore, the non-collection content writing works stored under 2000-year folders use the link /\:title instead.</p><p>NextJS uses a different routing scheme from Jekyll in that the path of the file in the filesystem is used to create the permalink. When trying to keep the 2000-year folders, the path for the page would instead be /20../\:slug instead of /\:slug. While it would not be that harmful to change the permalinks like this, we have around 50 works that are of this format.</p><p>A solution I came up with was to create two page paths for the 2000-year posts. In getStaticPaths, NextJS would create the /20../\:slug path and also the /\:slug path by removing the year from the catch all route. This causes the post to exist redundantly on two pages. However, redirect routing and telling web crawlers that the permalink should route to the /\:slug page would allow SEO to function normally to these permalinks that we have used in Pink-Currents.</p><p>Despite keeping permalinks in Calla-Lily the same as Pink-Currents, this solution has a performance tradeoff at build-time. When getting the post data in getStaticProps, the parameter that is passed to the /\:slug page that the user visits does not contain the 2000-year information. This is an issue when trying to query for the page data because there is no file in the filesystem that exists at <!-- -->_<!-- -->posts/\:slug because it would exist at <!-- -->_<!-- -->posts/20../\:slug. Therefore, a for loop that iterates over the existing years of 2020 to the current year must be used to try file paths until that file can be found.</p><p>In addition, the NextJS Link components on the homepage, genre pages, search, and prev/next post routes will show the clickable link as /20../\:slug instead of just /\:slug. The Link components do not mask the redirect routing and so users who share these posts will paste URLs that contain the year.</p><p>v4.5.4.1: Permalinks are now back to the /20../slug format</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="publishing-and-graphql-queries-v410---v4510">Publishing and GraphQL Queries (v4.1.0 - v4.5.1.0)<a href="#publishing-and-graphql-queries-v410---v4510" class="hash-link" aria-label="Direct link to Publishing and GraphQL Queries (v4.1.0 - v4.5.1.0)" title="Direct link to Publishing and GraphQL Queries (v4.1.0 - v4.5.1.0)">​</a></h3><p>The posts were uploaded to the repository in incremental collection commits. This is reflected in the version tagging where the second number represents the number of collections published under the current website manager. This is why the version quickly jumps from v4.1.0 to v4.5.1. The posts were not uploaded with the correct paths to images nor thumbnails and formatting was not checked. These edits will be resolved at a later version once the rest of the website was completed.</p><p>There was an issue during the Vercel build process where only fifty of the dynamic posts would be created and the rest returned 404. I was able to figure out how to run GraphQL from the developer mode by visiting localhost:3000/production/index.html#/graphql and then ran postsConnection because this is where the posts got queried for their data. It turned out that only 50 edges or posts were returned, meaning that TinaCMS’s default GraphQL configuration only selected 50 dynamic links at a time instead of all of them at once.</p><p>To solve this issue, I wanted to do a pagination of the GraphQL using the given information about the page that was returned from the query. I thought that pagination was better on the processor’s memory cache because it was only retrieving 50 posts at once instead of retrieving all 130 posts that would keep increasing over time. By using the cursor position and checking to see if there were more pages in the GraphQL query, I was able to fix the issue and built all of the dynamic paths to the posts.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="thumbnails-v4531">Thumbnails (v4.5.3.1)<a href="#thumbnails-v4531" class="hash-link" aria-label="Direct link to Thumbnails (v4.5.3.1)" title="Direct link to Thumbnails (v4.5.3.1)">​</a></h3><p>The Next/Image component is useful for page performance as the images that would be rendered on the homepage and genre pages would preload and automatically resize to save on network bandwidth. This functions just like the Pink-Currents manual resizing of the thumbnail images using imagemagick or ffmpeg but Next/Image allows us to use only the original copy of the image. After auditing the webpage, the rendered images had a slightly larger size than making the thumbnails, but it was the non-developer friendly way of reducing the network bandwidth. Another benefit to this is that future website developers would not have to manually run through this thumbnail step for every image that gets uploaded, so they have one less responsibility to maintain.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="search-v4531">Search (v.4.5.3.1)<a href="#search-v4531" class="hash-link" aria-label="Direct link to Search (v.4.5.3.1)" title="Direct link to Search (v.4.5.3.1)">​</a></h3><p>Up until this point, the Search component algorithm was programmed for a constant dataset of post information. This would be an issue for CMS producers that would not be able to update this dataset unless they went onto GitHub to update the dataset file. However, dynamic posts already fetched all of the post data within getStaticProps in order to get the previous and next post to route to, so it was possible to utilize the dataset that got statically fetched during page generation.</p><p>Upon inspection of pageProps in <!-- -->_<!-- -->app.js, this dataset was found as a prop there only for dynamic pages. Each landing page was modified to contain a getStaticProps which called  and returned getSortedPosts to get all of the post data. This would be passed up the execution tree to the App component to pageProps.</p><p>To get allPostsData into the Search component, the naive method would be to pass this prop down every component from App, Layout, Header, and Search to SearchResults. The alternative method to declutter this process would be to use React’s useContext hook which saves the selected props in the App component. Then in the Search component, calling the useAppContext hook would retrieve allPostsData from the deep parent props to be used in the search algorithm.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="seo-v454">SEO (v4.5.4)<a href="#seo-v454" class="hash-link" aria-label="Direct link to SEO (v4.5.4)" title="Direct link to SEO (v4.5.4)">​</a></h3><p>There are three main components of SEO that were part of Pink-Currents as plugins but not automatically configurable plugins in NextJS: robots.txt, sitemap.xml, and meta tags.</p><p>The easiest was a robots.txt file which had to be placed in the public folder as specified in the NextJS documentation. I disabled web crawlers from indexing the CMS path because it should not be exposed to search results, as well as the media store in the images directory to prevent images from showing up in search results where someone could plagiarize them.</p><p>NextJS had documentation on how to render a sitemap page, so I followed their implementation and added the lastmod tag on the posts to improve how often web crawlers would visit our website to find new pages. Posts are automatically fetched at runtime by referencing the API for posts. For the landing pages, I also implemented an API that fetched only their slugs to be used in the sitemap since the other data kept in the landing pages shouldn’t be used anywhere else for now.</p><p>Meta tags were implemented using a plugin called next-seo. The use of this plugin differs from the Jekyll one in that meta information had to be manually given values from the pages instead of being automatically fetched from the plugin. I improved the rendering of link previews for the new website by attaching an OpenGraph image of the thumbnail image if a post has one. In addition, the excerpt or description for a post would contain the contributors to the work as well as the first 150 characters of the non-HTML parsed text. This metadata can be seen by copying and pasting the link on different apps such as social media or Discord.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="final-edits-v455">Final Edits (v4.5.5)<a href="#final-edits-v455" class="hash-link" aria-label="Direct link to Final Edits (v4.5.5)" title="Direct link to Final Edits (v4.5.5)">​</a></h3><p>All 143 pages of the website had to be proofread to make sure they matched what was displayed on Pink-Currents. The parser the MDX pages had to be fixed because the current custom parser used to convert the file to HTML would not reliably parse inline HTML tags within a markdown paragraph. To fix this, I had to modify TinaCMS’s open source implementation of TinaMarkdown which parsed Markdown properly but not HTML. I imported the utility HTML React parser to convert any found HTML or inline HTML elements into React JSX elements properly, allowing our website to parse both Markdown and HTML.</p><p>The word count algorithm was slightly modified to get a more accurate reading of how many words are on a page.</p><p>Experimental posts had to be reattached to Next’s way of compiling files and connections, so JavaScript functions were transferred from the MDX files to the main dynamic post JS file. The useEffect hook proved useful in attaching these functions to the targeted stories. Other than that, there were no significant alterations to making the existing stories function properly!</p><p>The useEffect hook also aided in attaching the copyright protection over posts, as well as changing posts to dark theme if they were meant to be displayed that way. This rendering is allowed to fire more than once at the start of the page render because it was found that using an empty dependency list to fire this useEffect block only once may not allow copyright protections to take effect all the time.</p><p>To allow a non-developer editor to publish posts to the website, the dark theme was added to the CMS schema as a radio group selection for light or dark theme. In addition, the content warning was added as a string field where typing the content warning description will show the content warning overlay. These two fields use the useEffect hook, so they will also work in the live preview editor.</p><p>The announcement bar returned to the website as a useEffect hook to check if local storage contained the announcement variable, then set the state of the announcement to hide it if the user closed it. The announcement flickering was also fixed by making the announcement hidden by default and only appearing on the first useEffect render with a condition that checks the local storage!</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deployment-may-18-2023">Deployment (May 18, 2023)<a href="#deployment-may-18-2023" class="hash-link" aria-label="Direct link to Deployment (May 18, 2023)" title="Direct link to Deployment (May 18, 2023)">​</a></h2><p>It was found that the GitHub Pages workflow would still not complete the build process even after reaching the final stable build before public release. The site would build, but could not be exported as a static site because sitemap.xml was rendered on the server-side because it took data from the API endpoints. In addition, images using the Next/Image component would not be optimized if served as a static site. Since Vercel reliably worked for the entire time of pre-release development, I made the decision to switch to deploying the website on Vercel. The Google domain records were updated to remove GitHub’s record and use Vercel’s instead. Doing this caused the main URL to change from the apex otherpeoplesd.com to <a href="http://www.otherpeoplesd.com" target="_blank" rel="noopener noreferrer">www.otherpeoplesd.com</a>, but there should be no noticeable difference to end-users.</p><p>Pink-Currents is still deployed as a website at the GitHub Pages domain of other-people-ucsd.github.io/Pink-Currents/, although not everything works properly because the domain otherpeoplesd.com was hardcoded in some areas such as CSS urls.</p><p>Running a Google Lighthouse audit over the two websites’ homepages returned interesting results. While I accurately expected Calla-Lily to have around the same accessibility and best practices ratings, I was surprised that Calla-Lily was much faster in terms of performance. Thanks to Next.js’s image optimization, the network payload was 4837 KB with the cover image taking up 170 KB after being optimized. Most of the payload came from an optimized GIF, which is not a recommended practice to have for how much data it still contains. I plan on removing this GIF from the thumbnail and replacing it with a single image from the GIF instead.</p><p>In comparison, Pink-Currents’s network payload was 9152 KB where 8480 KB came from the cover image alone. Theoretically taking away the cover image would result in a total payload of 672 KB, which is a few hundred KB smaller than Next’s image optimization but the web developer must take an extra step to make thumbnails out of the images. For now, we shall let Next’s image optimization do the work so that the future website developer doesn’t have to worry about this in the future!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Other-People-UCSD/docs/tree/main/docs/calla-lily/03-calla-lily-release.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/calla-lily/architecture"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Architecture</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/calla-lily/schema"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Post Schema &amp; Data</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#abstract" class="table-of-contents__link toc-highlight">Abstract</a><ul><li><a href="#choosing-the-reactjs-static-site-generator" class="table-of-contents__link toc-highlight">Choosing The Reactjs Static Site Generator</a></li></ul></li><li><a href="#rebuild-process-v400" class="table-of-contents__link toc-highlight">Rebuild Process (v4.0.0)</a><ul><li><a href="#choosing-the-cms" class="table-of-contents__link toc-highlight">Choosing the CMS</a></li><li><a href="#configurations-for-tinacms-v401---v4042" class="table-of-contents__link toc-highlight">Configurations for TinaCMS (v4.0.1 - v.4.0.4.2)</a></li><li><a href="#permalinks-v410" class="table-of-contents__link toc-highlight">Permalinks (v4.1.0)</a></li><li><a href="#publishing-and-graphql-queries-v410---v4510" class="table-of-contents__link toc-highlight">Publishing and GraphQL Queries (v4.1.0 - v4.5.1.0)</a></li><li><a href="#thumbnails-v4531" class="table-of-contents__link toc-highlight">Thumbnails (v4.5.3.1)</a></li><li><a href="#search-v4531" class="table-of-contents__link toc-highlight">Search (v.4.5.3.1)</a></li><li><a href="#seo-v454" class="table-of-contents__link toc-highlight">SEO (v4.5.4)</a></li><li><a href="#final-edits-v455" class="table-of-contents__link toc-highlight">Final Edits (v4.5.5)</a></li></ul></li><li><a href="#deployment-may-18-2023" class="table-of-contents__link toc-highlight">Deployment (May 18, 2023)</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/category/calla-lily">Calla-Lily</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/pink-currents">Pink-Currents</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.instagram.com/otherpeoplesd/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/otherpeoplesd/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Other-People-UCSD" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Organization<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/Other-People-UCSD/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/Other-People-UCSD/Calla-Lily" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Calla-Lily<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/Other-People-UCSD/Pink-Currents" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Pink-Currents<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Other People Magazine.<br> Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.c8f2f42c.js"></script>
<script src="/assets/js/main.3e78aa7e.js"></script>
</body>
</html>