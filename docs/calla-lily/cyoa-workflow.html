<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-calla-lily/cyoa-workflow">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Choose Your Own Adventure (CYOA) Workflow | Other People Magazine Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://Other-People-UCSD.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://Other-People-UCSD.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://Other-People-UCSD.github.io/docs/calla-lily/cyoa-workflow"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Choose Your Own Adventure (CYOA) Workflow | Other People Magazine Docs"><meta data-rh="true" name="description" content="You Have Created An Imaginary Friend"><meta data-rh="true" property="og:description" content="You Have Created An Imaginary Friend"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://Other-People-UCSD.github.io/docs/calla-lily/cyoa-workflow"><link data-rh="true" rel="alternate" href="https://Other-People-UCSD.github.io/docs/calla-lily/cyoa-workflow" hreflang="en"><link data-rh="true" rel="alternate" href="https://Other-People-UCSD.github.io/docs/calla-lily/cyoa-workflow" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Other People Magazine Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Other People Magazine Docs Atom Feed"><link rel="stylesheet" href="/assets/css/styles.78a09b4a.css">
<link rel="preload" href="/assets/js/runtime~main.78e04574.js" as="script">
<link rel="preload" href="/assets/js/main.ef24a77e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Other People</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/history">Docs</a><a class="navbar__item navbar__link" href="/docs/category/calla-lily">Calla-Lily</a><a class="navbar__item navbar__link" href="/docs/category/pink-currents">Pink-Currents</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://www.otherpeoplesd.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/Other-People-UCSD/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Docs GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/history">OPM History</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/shared-concepts">Shared Concepts in CL and PC</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/calla-lily">Calla-Lily</a><button aria-label="Toggle the collapsible sidebar category &#x27;Calla-Lily&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/calla-lily/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/calla-lily/schema">Post Schema &amp; Data</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/calla-lily/data-layer">Data Layer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/calla-lily/calla-lily-release">Rebuild Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/calla-lily/cyoa-workflow">Choose Your Own Adventure (CYOA) Workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/calla-lily/typewriter-workflow">Typewriter Workflow</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/pink-currents">Pink-Currents</a><button aria-label="Toggle the collapsible sidebar category &#x27;Pink-Currents&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/editor-manual">Editor/Web Producer Manual</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/uploading-media">Uploading Media to the Website</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/calla-lily"><span itemprop="name">Calla-Lily</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Choose Your Own Adventure (CYOA) Workflow</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Choose Your Own Adventure (CYOA) Workflow</h1></header><p><a href="https://www.otherpeoplesd.com/6/you-have-created-an-imaginary-friend" target="_blank" rel="noopener noreferrer">You Have Created An Imaginary Friend</a></p><p><a href="https://github.com/Other-People-UCSD/Calla-Lily/blob/main/public/js/cyoa.js" target="_blank" rel="noopener noreferrer">cyoa.js (source code)</a></p><p><a href="https://www.otherpeoplesd.com/js/imaginary-friend-theo-erickson.json" target="_blank" rel="noopener noreferrer">&quot;You Have Created An Imaginary Friend&quot; JSON data</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="abstract">Abstract<a href="#abstract" class="hash-link" aria-label="Direct link to Abstract" title="Direct link to Abstract">​</a></h2><p>The choose-your-own-adventure (CYOA) program is meant to give the end user a more understandable experience of the story
by allowing them to see their progress through the story. This documentation goes through the CYOA workflow using Theo
Erickson’s “You Have Created An Imaginary Friend” story as a reference.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="context">Context<a href="#context" class="hash-link" aria-label="Direct link to Context" title="Direct link to Context">​</a></h2><p>Many CYOA stories may be drafted as a Twine or other dialogue story file. Twine has an undo and redo feature for
passages, but lacks any progress indicator for the user to see how long the story is. This lack of indicator can confuse
users who think there isn’t more to the story if they get lost and keep repeating routes. In addition, publishing a
Twine file can take the form of a third-party website that we cannot manage, or a standalone HTML file. That HTML file
does not work well with the Jekyll-based and React-based website’s ability to template an HTML page. For an enhanced UX
and UI experience that can natively run on the Other People Website via DOM injection, our own CYOA program is used.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="timeline">Timeline<a href="#timeline" class="hash-link" aria-label="Direct link to Timeline" title="Direct link to Timeline">​</a></h2><ul><li>February 24, 2023 - April 11, 2023: Minimum Viable Product of cyoa.js</li><li>February 24, 2023 - April 21, 2023: Creative Edits on story</li><li>April 22, 2023 - May 24, 2023: Copy Edits on story</li><li>May 23, 2023 - May 31, 2023: Final cyoa.js Website Edits for &quot;You Have Created An Imaginary Friend&quot;</li><li>June 2, 2023: Public release of &quot;You Have Created An Imaginary Friend&quot;</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-pipeline">Data Pipeline<a href="#data-pipeline" class="hash-link" aria-label="Direct link to Data Pipeline" title="Direct link to Data Pipeline">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="raw-text-data-editing-and-storage">Raw Text Data Editing and Storage<a href="#raw-text-data-editing-and-storage" class="hash-link" aria-label="Direct link to Raw Text Data Editing and Storage" title="Direct link to Raw Text Data Editing and Storage">​</a></h3><p>It can be difficult for staff editors to edit the story off Twine when the Twine file does not syncronize editing state
when it can only be imported by a .twine file. Instead, CYOA stories should be written in a collaborative text editor
such as Google Docs where all viewers will see the same version. To organize the story, each passage should be on its
own page. Adding a header such as the route or id number allows for internal hyperlinks to work where routes from other
passages can link to and it makes stepping through the story arc feel very similar to Twine or the CYOA program.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-extraction">Data Extraction<a href="#data-extraction" class="hash-link" aria-label="Direct link to Data Extraction" title="Direct link to Data Extraction">​</a></h3><p>After completing the story in a collaborative text editor, the raw text is put into a spreadsheet. This is necessary to
organize the data in a way that a popular programming language can read rather than using something like Google Apps
Script to extract the spreadsheet data, especially if a passage extends more than one page. The downside of using a
spreadsheet is that it is harder to review the raw text as compared to a text editor, so this is something that the
website developer is expected to set up.</p><p>The main columns for the spreadsheet are <strong>id </strong>(unique) and <strong>passage text</strong>. Passage text includes the main text to display on
the story, but not the routes the user can click on. Instead, routes are saved in a two-column repeating form where the
first column is the <strong>id to route to</strong> and the second is the <strong>route text</strong>. This is repeated in the spreadsheet such that
individual route options can be modified in an easier fashion rather than adding all routes into one spreadsheet cell
with some delimiter to separate them.</p><blockquote><p>| id | passageText | to | text | to | text | ...</p></blockquote><p>After transferring the raw text to the spreadsheet, passages that require further interactivity can have the text
modified to include HTML/CSS elements such as buttons or different styles. JavaScript can be added to the text here, but
it will not activate on the React-based website. Instead, the CYOA program automatically adds the interactive event
listeners on-demand during program execution.</p><p>Exporting spreadsheet data commonly takes upon a delimiter-separated format. Google Sheets and Excel support both
comma-separated values and tab-separated values, but only tab-separated values work effectively here. This is because
storywriting often uses commas when writing dialogue, so those commas in <strong>passage text</strong> will affect how the column-based
data is separated and read. Instead, tab-separated values will usually work because intentional tabs are rarer in
storywriting and thus tab occurrences in the text can be replaced with unicode encodings. It would not be friendly to
read data that has hundreds of unicode-encoded commas scattered in every passage.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-transformation">Data Transformation<a href="#data-transformation" class="hash-link" aria-label="Direct link to Data Transformation" title="Direct link to Data Transformation">​</a></h3><p>The exported .tsv file must be slightly modified such that each passage of the story is on its own page. Sometimes, the
passage text might create line breaks between paragraphs that mess with the way the .tsv file got saved. Removing the
line breaks and then using <strong>double spaces </strong>between the paragraphs will ensure that the tsv file has the same number of
lines as the number of passages in the story.</p><p>The reason why paragraphs have their own double-spaced delimiter inside the tsv is because the hybridized text may be
raw text or HTML. If a passage is raw andtext there are multiple paragraphs, the data has to understand that there are
multiple paragraphs that cannot be demarcated by a single space since a story will have spaces throughout it. Double
spaces are rarer and can be unicode-encoded as well. Another option is to just change the delimiter used to something
else.</p><p>The .tsv file should now be formatted at this stage. To extract the data from the .tsv file, a Python script is used.
The main reason why this data extraction and transformation is done in Python instead of JavaScript is because it was
easier to work with data locally through a notebook instead of waiting for an synchronous HTTP request to get the data
from the .tsv file and then transforming it into JSON that could be used more easily in the program. The python
algorithm reads the tsv file line by line and creates a JSON object in the following format:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  “story”: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    “id”: Number,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    “passageText”: [String],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    “routes”: [ { “to”: Number, “text”: String }]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The diagram below shows the directed graph in tree format of the eighty paths in “You Have Created An Imaginary Friend”.
There are 126 paths with 33 of them going back to start.</p><p><img loading="lazy" alt="A directed graph in tree form of the routes." src="/assets/images/imaginary-friend-graph-tree-back-ebe09cdd3da7a519d506882afb67bf89.png" width="1295" height="1295" class="img_ev3q"></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-storage">Data Storage<a href="#data-storage" class="hash-link" aria-label="Direct link to Data Storage" title="Direct link to Data Storage">​</a></h3><p>This JSON object is written to a .json file which will then be stored inside the /public/js folder on the website. The
object is already minified from the python script so there is no need to expand it unless edits to the story data need
to be made. <strong>The “You Have Created An Imaginary Friend” JSON file is 85.1 KB in size.</strong> It is also a more hidden resource
that cannot be found on the sources tab in the /js folder, but can still be identified by looking through the network
log.</p><p>As for the webpage where the data is deployed, the markdown file content must contain an element with the id “story-ref”
for the program to find the filename of the JSON file. There must also be a div with the id “output-text” where the
algorithm writes the passage data to. Optionally, there is a progress container for the progress bar and a reset button.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="algorithm">Algorithm<a href="#algorithm" class="hash-link" aria-label="Direct link to Algorithm" title="Direct link to Algorithm">​</a></h2><p>Refer to the JSDocs documentation for information on the specific functions. Otherwise, this is a general workflow of
how the program operates.</p><p>When the webpage is loaded, the program will fetch the data stored in the JSON file. It will store the data in a global
variable that allows the program to refer to the data as the user goes through the story. In addition, loading the
webpage by either navigating away or hard refreshing the page will reset any route history the reader has had before.</p><p>Passages are written according to their <strong>0-indexed</strong> position in the stored array. If the passage text is identified as
text when there are no HTML tags present in it, then the text will be appended to the page in a paragraph tag. Otherwise
the text is in HTML format and is directly appended to the page. If there are buttons in the HTML paragraph, event
listeners will be added to them based on the events that were passed in as attributes to the button.</p><p>After appending the passage text to the screen, the route options are created. Each option is a button list item with a
clickable event listener function that will display the route in bold once it is clicked on, updates the visited state
of the taken route, and shows that next passage. These options are styled based on their visited state: red for not
visited, orange for partially visited but some subroutes have not been visited yet, and green for fully visited.</p><p>This route visited state is stored in a <strong>0-indexed array</strong> with length to the number of passages in the story. Whenever the
visited state of a route changes, the state is stored in local storage so that the reader can keep track of their
progress. In addition, a history stack will push the traveled passage id to allow the user to go back if they would like
to. It does not make practical sense to have a redo button when the list of options will also display again. If a route
has reached the end, then it is marked as fully visited and given a value of 2 in the array. When this happens, <strong>changes
are bubbled up</strong> through the directed graph of the story by using the history array. This function improves user
understanding of where they have gone as the entire leaf of a route tree will turn green, allowing the user to pick the
other branches at the intersection to continue reading unexplored paths in the story.</p><p><img loading="lazy" alt="Diagram showing bubbling coloration of passages up a route leaf." src="/assets/images/cyoa-bubbling-state-ce6396406810b0838d85386a23460002.png" width="671" height="571" class="img_ev3q"></p><p>The limitation of this bubbling up of state is that other parent routes that will satisfy the fully visited condition
will not be affected because this is dependent on the history stack. This can have potential side effects up the tree,
as nodes 66 and 67 in the following diagram should both be green after the user routes to node 71. Solving this case may
improve coverage for the user at the cost of algorithmic efficiency to color routes.</p><p><img loading="lazy" alt="Diagram showing bubbling state only through the history and not other valid parents." src="/assets/images/cyoa-bubbling-state-history-b43b76a1e67dd7b5f8b9ffc57c0a19ec.png" width="862" height="352" class="img_ev3q"></p><p>The progress bar updates when an unvisited route is clicked on. There have been reported cases where it can go one over
the number of passages in the story. To resolve this, once all routes have been visited the progress bar is set to the
number of passages in the story and sets all route states to completely visited.</p><p>Some paragraphs contain special actions that extend the functionality of displaying passages. While it is possible to
try to run actions on every passage, it is optimal to run an action only if the passage has an action. These actions are
often dependent on conditions to function, so refer to the program code to see how each action is run. For example, the
main passage where the reader starts from has a fifth route that is hidden if the reader hasn’t reached the true main
route of the story. This action checks local storage for the variable that keeps this state and then unhides the route
if the condition is met. Other events include adding special event listeners to elements that don’t act like the usual
buttons with events that are already handled when the passage is created.</p><p>The reset button is implemented as a way to reset the visited states over the routes and any local storage variables
associated with the story. This currently works over “You Have Created An Imaginary Friend”’s local storage variables
but there are multiple ways to conditionally reset the variables associated with the story being displayed. That is
something that can be exported in the future when this case arises.</p><p>“You Have Created An Imaginary Friend” has a special function that allows the user to input their own text and see it
displayed on the page. This includes a text input for a story title as well as a textarea that resizes itself so it
won’t take up too much space and lets the user see everything they have typed instead of a scrollable element. This
storywriting component also has an option to save the user’s story. This is done by creating a temporary hidden link and
attaching events to download a text file with the story encoded into it, then automatically clicking it using
JavaScript.</p><p><img loading="lazy" alt="Screenshot showing the passages a user can create a story." src="/assets/images/imaginary-friend-create-story-3d61a2007fbda249927a7670341f8a70.png" width="1191" height="741" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="uxui-design">UX/UI Design<a href="#uxui-design" class="hash-link" aria-label="Direct link to UX/UI Design" title="Direct link to UX/UI Design">​</a></h2><p>With the assistance of Katie Lew, the UI designer, changes were made to make the progress bar narrower and other spacing
between text. End users have a better context about how routes and inline buttons that had actions were clickable by
adding hovering styles that outlined the elements. The width of the buttons was also increased to cover the entire row
instead of only the text content because some routes have very little text and might have been difficult to select for
some users.</p><p>The route color for yellow/gold is also slightly different on dark theme devices for a better contrast against the dark
background and the other two route colors. All input and button sections have appropriate styles on dark theme as well.</p><p>Aria descriptions were added to the buttons that the user can be interacted with. For the list of routes the user can
take, the list has a description that indicates that the following buttons are route options. Individual routes do not
have an aria description because the flow of hearing the description every time interrupts with its content and the
description on the list already explains the purpose of the component.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="future-extensions">Future Extensions<a href="#future-extensions" class="hash-link" aria-label="Direct link to Future Extensions" title="Direct link to Future Extensions">​</a></h2><p>This CYOA program can be greatly extended to provide a better user interface! Some significant examples include audio
snippets over each passage, a theme changer that can be implemented exclusively for the program or globally over the
website, instructional information, and more interactive elements on individual passages!</p><p>The main goal is to keep the CYOA program modulated and reusable over multiple stories without having to modify existing
core algorithms of the program. Internally, it can be a good idea to make the CYOA program take options such as if the
back and reset button and the progress bar should be displayed for each story that uses the program.</p><p>Another diagram of “You Have Created An Imaginary Friend” without the edges back to start (node 1).</p><p><img loading="lazy" alt="A directed graph in tree form of the routes." src="/assets/images/imaginary-friend-graph-tree-forward-ce8498e9a635bed1527d7cf9afe7d932.png" width="1295" height="1295" class="img_ev3q"></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/Other-People-UCSD/docs/tree/main/docs/calla-lily/cyoa-workflow.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/calla-lily/calla-lily-release"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Rebuild Release Notes</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/calla-lily/typewriter-workflow"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Typewriter Workflow</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#abstract" class="table-of-contents__link toc-highlight">Abstract</a></li><li><a href="#context" class="table-of-contents__link toc-highlight">Context</a></li><li><a href="#timeline" class="table-of-contents__link toc-highlight">Timeline</a></li><li><a href="#data-pipeline" class="table-of-contents__link toc-highlight">Data Pipeline</a><ul><li><a href="#raw-text-data-editing-and-storage" class="table-of-contents__link toc-highlight">Raw Text Data Editing and Storage</a></li><li><a href="#data-extraction" class="table-of-contents__link toc-highlight">Data Extraction</a></li><li><a href="#data-transformation" class="table-of-contents__link toc-highlight">Data Transformation</a></li><li><a href="#data-storage" class="table-of-contents__link toc-highlight">Data Storage</a></li></ul></li><li><a href="#algorithm" class="table-of-contents__link toc-highlight">Algorithm</a></li><li><a href="#uxui-design" class="table-of-contents__link toc-highlight">UX/UI Design</a></li><li><a href="#future-extensions" class="table-of-contents__link toc-highlight">Future Extensions</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/category/calla-lily">Calla-Lily</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/pink-currents">Pink-Currents</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.instagram.com/otherpeoplesd/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Instagram<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/otherpeoplesd/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/Other-People-UCSD" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Organization<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/Other-People-UCSD/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/Other-People-UCSD/Calla-Lily" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Calla-Lily<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/Other-People-UCSD/Pink-Currents" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Pink-Currents<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Other People Magazine.<br> Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.78e04574.js"></script>
<script src="/assets/js/main.ef24a77e.js"></script>
</body>
</html>