"use strict";(self.webpackChunkopm_documentation=self.webpackChunkopm_documentation||[]).push([[2695],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=p(n),m=r,f=u["".concat(s,".").concat(m)]||u[m]||d[m]||i;return n?a.createElement(f,o(o({ref:t},c),{},{components:n})):a.createElement(f,o({ref:t},c))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[u]="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4333:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=n(7462),r=(n(7294),n(3905));const i={title:"API Endpoints",sidebar_position:7,contributor:"Kevin Jang"},o=void 0,l={unversionedId:"calla-lily/api",id:"calla-lily/api",title:"API Endpoints",description:"The purpose of creating an API for this website is to create insights over the literature and art* published at Other People. Most API calls are used in the data science section.",source:"@site/docs/calla-lily/07-api.md",sourceDirName:"calla-lily",slug:"/calla-lily/api",permalink:"/docs/calla-lily/api",draft:!1,editUrl:"https://github.com/Other-People-UCSD/docs/tree/main/docs/calla-lily/07-api.md",tags:[],version:"current",sidebarPosition:7,frontMatter:{title:"API Endpoints",sidebar_position:7,contributor:"Kevin Jang"},sidebar:"docsSidebar",previous:{title:"[...slug].js Dynamic Routing",permalink:"/docs/calla-lily/dynamic-routing"},next:{title:"Search and Displaying Recommendations",permalink:"/docs/calla-lily/search"}},s={},p=[],c={toc:p},u="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The purpose of creating an API for this website is to create insights over the literature and art* published at Other People. Most API calls are used in the ",(0,r.kt)("a",{parentName:"p",href:"docs/data-science"},"data science section"),"."),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"*There are no endpoints for artwork to prevent crawling the api endpoints to get the image and circumvent copying. However, there haven't been any outside attempts by adversarial crawlers to access the API endpoints in the server log. The better option in the future would be to use a Content Delivery Network (CDN) for this purpose and to display the image anywhere.")),(0,r.kt)("p",null,"The API functions are not statically generated and are referred to as serverless functions in the Next.js framework. They use an asynchronous ",(0,r.kt)("inlineCode",{parentName:"p"},"handler")," function to get data from a function inside ",(0,r.kt)("inlineCode",{parentName:"p"},"lib/posts.js")," and then transform the data into a JSON object to the endpoint. To understand what each endpoint outputs, it is best to look at these functions because their return objects have conditions depending on if it is for the static site or for the API."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Endpoints"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"api/site-urls.json")," returns an array containing all public site urls that are allowed to be indexed by crawlers. Used for quickly getting a list of all urls."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"api/pages.json")," returns urls for the landing pages. Used in ",(0,r.kt)("inlineCode",{parentName:"li"},"sitemap.xml")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"api/site-urls"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"api/post-metadata.json")," returns an object of ",(0,r.kt)("inlineCode",{parentName:"li"},"{slug: {...props}}")," format. Only contains the metadata or frontmatter."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"api/post-data.json")," returns an object of ",(0,r.kt)("inlineCode",{parentName:"li"},"{slug: {...props}}")," format. Contains the metadata and noHTML content."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"api/post/[...slug]")," returns an object of ",(0,r.kt)("inlineCode",{parentName:"li"},"{...props}")," format. Contains metadata, noHTML, and HTML contents."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Valid HTTP Methods"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"GET"),". The native API is meant to be read-only. For modifying posts, use the TinaCMS API that requires an authenticated user and project token secret.")))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Custom Headers",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},'"opm-content": "preview"')," limits how much plaintext content is provided to the client. ")))),(0,r.kt)("p",null,"Custom headers are case-sensitive, so it is suggested to write them in lowercase prefixed with ",(0,r.kt)("inlineCode",{parentName:"p"},"opm"),"."))}d.isMDXComponent=!0}}]);